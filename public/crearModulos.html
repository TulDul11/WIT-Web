<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Editor de Módulo</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Quill CSS -->
  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
  <link rel="stylesheet" href="modulos.css">
</head>
<body>

  <div id="login_container">
    <!--Campo para título de módulo-->
    <div id="module-title-wrapper" class="mb-3">
        <label for="module-title" class="form-label fw-bold">Título del módulo</label>
        <input type="text" class="form-control" id="module-title" placeholder="Ej. Introducción al sistema solar">
      </div>
      
    <!-- Título con id para mostrar/ocultar -->
    <h2 id="page-title">Crear Contenido del Módulo</h2>

    <!-- Contenedor del editor (toolbar + editor) -->
    <div id="editor-wrapper">
      <!-- Toolbar personalizada de Quill -->
      <div id="toolbar-container">
        <select class="ql-header">
          <option selected></option>
          <option value="1">Título 1</option>
          <option value="2">Título 2</option>
          <option value="3">Título 3</option>
        </select>
        <button class="ql-bold"></button>
        <button class="ql-italic"></button>
        <button class="ql-underline"></button>
        <button class="ql-link"></button>
        <button class="ql-image"></button>
        <button class="ql-list" value="ordered"></button>
        <button class="ql-list" value="bullet"></button>
      </div>
      <!-- Editor de Quill -->
      <div id="editor-container"></div>
    </div>

    <h3 id="preview-title" class="fw-bold" style="display: none;"></h3>

    <!-- Vista previa -->
    <div id="preview-container"></div>

    <!-- Botones de acción -->
    <div class="mt-3">
      <button id="btn-preview" class="btn btn-custom me-2">Guardar y Previsualizar</button>
      <button id="btn-edit" class="btn btn-custom" style="display: none;">Editar</button>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
  <script>
    // Inicializamos Quill con la toolbar personalizada
    const quill = new Quill('#editor-container', {
      theme: 'snow',
      modules: {
        toolbar: '#toolbar-container'
      },
      placeholder: 'Escribe aquí el contenido del módulo...'
    });

    const editorWrapper = document.getElementById('editor-wrapper');
    const previewContainer = document.getElementById('preview-container');
    const btnPreview = document.getElementById('btn-preview');
    const btnEdit = document.getElementById('btn-edit');
    const pageTitle = document.getElementById('page-title');

    // Al guardar y previsualizar
    btnPreview.addEventListener('click', () => {
        const titulo = document.getElementById('module-title').value;
        const contenido = quill.root.innerHTML;
      
        // Mostrar el título en la vista previa
        document.getElementById('preview-title').textContent = titulo;
        document.getElementById('preview-title').style.display = 'block';
        document.getElementById('module-title-wrapper').style.display = 'none';

      
        previewContainer.innerHTML = contenido;
        editorWrapper.style.display = 'none';
        previewContainer.style.display = 'block';
        pageTitle.style.display = 'none';
        btnPreview.style.display = 'none';
        btnEdit.style.display = 'inline-block';
    });
      
    btnEdit.addEventListener('click', () => {
        editorWrapper.style.display = 'block';
        previewContainer.style.display = 'none';
        document.getElementById('preview-title').style.display = 'none';
        document.getElementById('module-title-wrapper').style.display = 'block';
        pageTitle.style.display = 'block';
        btnPreview.style.display = 'inline-block';
        btnEdit.style.display = 'none';
    });
      
  </script>
</body>
</html>
