<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Ver Módulo</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/@coreui/coreui@5.3.1/dist/css/coreui.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="styles/style.css" />
</head>
<body class="course_body">
  <!-- NAVBAR COPIADA -->
  <nav class="navbar navbar-expand-lg navbar-light" id="nav_bar">
    <div id="nav_div">
      <div id="navbar_nav">
        <img src="./images/menu_icon_white.png" id="nav_bar_menu" />
        <img src="./images/wti_logo_white_cropped.png" id="nav_bar_logo" />
        <div id="nav_modules">
          <ul class="navbar-nav">
            <li><a class="nav-link active" href="course.html">Inicio</a></li>
          </ul>
        </div>
      </div>
      <div id="nav_role"></div>
    </div>
  </nav>

  <!-- CONTENIDO DEL MÓDULO -->
  <div class="container mt-5" id="modulo_content">
    <h1 id="modulo_titulo" class="fw-bold mb-4"></h1>
    <div id="modulo_html" class="mb-5"></div>

    <h4 class="fw-bold">Videojuego asociado</h4>
    <div id="juego-container" style="margin-top: 1rem;">
      <iframe 
      id="juego-frame"
      width="100%" 
      height="640" 
      style="max-width: 1100px; margin-inline: auto; display: block; border: none;">
    </iframe>
    

    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', async () => {
      const params = new URLSearchParams(window.location.search);
      const id = params.get('id');
  
      try {
        const res = await fetch(`/modulos/${id}`);
        if (!res.ok) throw new Error('No encontrado');
        const modulo = await res.json();
  
        document.getElementById('modulo_titulo').textContent = modulo.titulo;
        document.getElementById('modulo_html').innerHTML = modulo.contenido_html;
  
        const juegoSrc = `juegos/index.html?modulo=${modulo.id}`;
        document.getElementById('juego-frame').src = juegoSrc;

  
      } catch (err) {
        document.getElementById('modulo_content').innerHTML = `
          <div class="alert alert-danger">Módulo no encontrado</div>
        `;
      }
    });
  </script>
</body>
</html>
